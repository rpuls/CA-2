<!DOCTYPE html>

<html>
    <head>
        <style>
            #container1 {
                background-color: #e2dada;
            }

            .centered-form {
                margin-top: 120px;
                margin-bottom: 120px;
            }

        </style>
        <title>Register a person</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <script   src="http://code.jquery.com/jquery-3.1.1.js"   integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="   crossorigin="anonymous"></script>
        <script>

            $(document).ready(function () {
                refreshHobbies();

                $("#pAdd").click(function ()
                {
                    PersonAdd();
                });

            });

            function refreshHobbies() {

                $.ajax({
                    url: "api/hobby",
                    contentType: "application/json",
                    method: "GET"
                }).done(function (hobby) {
                    var items = "";
                    hobby.forEach(function (hobby) {
                        items += "<option>" + $(hobby).attr("name") + "</option>";
                    });

                    $("#hobbylist").append(items);
                });

            }
            function insertNewData(data) {
                var id = $(data).prop("id");
                var name = $(data).prop("name");
                var description = $(data).prop("description");

                var htmlString = "<h2> Inserted New Hobby in the database with the attriubutes </h2>";
                htmlString += "<ul>";
                htmlString += "<li> id: " + id + "</li>";
                htmlString += "<li> Name: " + name + "</li>";
                htmlString += "<li> description: " + description + "</li>";
                htmlString += "</ul>";
                $("#newdiv").append(htmlString);

            }




            function PersonAdd()
            {
                var person = '{ firstName: ' + $("#firstName").val() + ', lastName: ' + $("#lastName").val() + ', phoneNumber: ' + $("#phone").val() + ' }';

                $.ajax({
                    url: "api/person",
                    type: "json",
                    method: "POST",
                    data: person,
                    dataType: "json",
                    contentType: "application/json; charset=utf-8"

                }).done(function (data, status) {
                    console.log(data);
                    insertNewData(data);
                }).fail(function (xhr, status, error) {
                    console.log("Error!!!  Status Code: " + xhr.responseJSON.code + " Message: " + xhr.responseJSON.message);
                });

            }

        </script>
    </head>
    <body>
        <div class="container">
            <div class="row centered-form">
                <div class="col-xs-12 col-sm-8 col-md-4 col-sm-offset-2 col-md-offset-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title text-center">Add new Person</h3>
                        </div>
                        <div class="panel-body">
                            <form role="form">
                                <div class="form-group">
                                    <input type="text" name="first_name" id="firstName" class="form-control input-sm" placeholder="First Name">
                                </div>

                                <div class="form-group">
                                    <input type="text" name="last_name" id="lastName" class="form-control input-sm" placeholder="Last Name">
                                </div>

                                <div class="form-group">
                                    <input type="email" name="email" id="email" class="form-control input-sm" placeholder="Email Address">
                                </div>
                                <div class="form-group">
                                    <input type="tel" name="phone" id="phone" class="form-control input-sm" placeholder="Phone Number">
                                </div>

                                <div class="form-group">
                                    Select Hobby<select multiple id="hobbylist" class="form-control" >
                                        
                                    </select>
                                </div>

                                <input id="pAdd" type="submit" value="Register" class="btn btn-info btn-block">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
