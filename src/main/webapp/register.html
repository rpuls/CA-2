<!DOCTYPE html>

<html>
    <head>
        <style>
        #container1 {
            background-color: #e2dada;
        }

        .centered-form {
            margin-top: 120px;
            margin-bottom: 120px;
        }

        </style>
        <title>Register a person</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <script   src="http://code.jquery.com/jquery-3.1.1.js"   integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="   crossorigin="anonymous"></script>
        <script>
            
            $(document).ready(function ()
{

    $("#pAdd").click(function ()
    {
        refreshHobbies();
        PersonAdd();
//        $('#TablePersons').append('<tr><td>New</td><td>' + $("#PersonFirstName").val() + '</td><td>' + $("#PersonLastName").val() + '</td><td>' + $("#PersonPhoneNumber").val() + '</td></tr>');
    });




});

function refreshHobbies()
            {
                $.getJSON("api/hobby/all", function (hobby)
                {
                    $('#TablePersons tr').remove();
                    var rows = "";
                    
                    $.each(hobby, function (i, person)
                    {
                        rows += '<tr><td>' + person.id + '</td><td>' + person.firstName + '</td><td>' + person.lastName + '</td><td>' + person.phoneNumber + '</td><td><input type="button" onclick="PersonDeleteID(' + person.id + ')" value="Delete" /></td><td><a href="#" class="btndelete" data-personid="' + person.id + '">Delete</a></tr>';
                    });
                    
                    $('#TablePersons').append(rows);
                });
            }





function PersonAdd()
{
    var person = '{ firstName: ' + $("#firstName").val() + ', lastName: ' + $("#lastName").val() + ', phoneNumber: ' + $("#phone").val() + ' }';

    $.ajax({
        url: "api/person",
        type: "json",
        method: "POST",
        data: person,
        dataType: "json",
        contentType: "application/json; charset=utf-8"
        
    }).done(function (data, status) {
            console.log(data);
            insertNewData(data);
        }).fail(function (xhr, status, error) {
            console.log("Error!!!  Status Code: "+ xhr.responseJSON.code + " Message: " +xhr.responseJSON.message );
        });
    
}
            
        </script>
    </head>
    <body>
         <div class="container">
        <div class="row centered-form">
            <div class="col-xs-12 col-sm-8 col-md-4 col-sm-offset-2 col-md-offset-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title text-center">Add new Person</h3>
                    </div>
                    <div class="panel-body">
                        <form role="form">
                            <div class="form-group">
                                <input type="text" name="first_name" id="firstName" class="form-control input-sm" placeholder="First Name">
                            </div>

                            <div class="form-group">
                                <input type="text" name="last_name" id="lastName" class="form-control input-sm" placeholder="Last Name">
                            </div>

                            <div class="form-group">
                                <input type="email" name="email" id="email" class="form-control input-sm" placeholder="Email Address">
                            </div>
                            <div class="form-group">
                                <input type="tel" name="phone" id="phone" class="form-control input-sm" placeholder="Phone Number">
                            </div>

                            

                            <input id="pAdd" type="submit" value="Register" class="btn btn-info btn-block">
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

        
    </body>
</html>
